{"ast":null,"code":"var _jsxFileName = \"/Users/karnielaliao/Downloads/wp1101-main 3/hw9/frontend/src/Containers/ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport Message from './Message';\nimport Title from './Title';\nimport { Button, Input, Tabs, Row, Col, Badge } from 'antd';\nimport ChatRoomModal from './ChatRoomModal';\nimport ChatBox from './ChatBox';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\n\nconst ChatRoom = _ref => {\n  _s();\n\n  let {\n    me,\n    body,\n    setBody,\n    newChatUser,\n    setNewChatUser,\n    activeKey,\n    setActiveKey,\n    panes,\n    setPanes,\n    showModal,\n    setShowModal,\n    displayStatus,\n    sendMessage,\n    clearMessages,\n    createChatRoom\n  } = _ref;\n  const [focused, setFocused] = useState(false);\n\n  const onChange = activeKey => {\n    setActiveKey(activeKey);\n  };\n\n  const onEdit = (targetKey, action) => {\n    if (action === 'add') {\n      add();\n    } else if (action === 'remove') {\n      remove(targetKey);\n    }\n  };\n\n  const add = () => {\n    setShowModal(true);\n  };\n\n  const remove = targetKey => {\n    let newActiveKey = activeKey;\n    let lastIndex;\n    panes.forEach((pane, i) => {\n      if (pane.key === targetKey) {\n        lastIndex = i - 1;\n      }\n    });\n    const newPanes = panes.filter(pane => pane.key !== targetKey);\n\n    if (newPanes.length && newActiveKey === targetKey) {\n      if (lastIndex >= 0) {\n        newActiveKey = newPanes[lastIndex].key;\n      } else {\n        newActiveKey = newPanes[0].key;\n      }\n    }\n\n    setPanes(newPanes);\n    setActiveKey(newActiveKey);\n  };\n\n  const onFocus = () => {\n    setFocused(true);\n  };\n\n  const onBlur = () => {\n    setFocused(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [me, \"'s Chat\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Message, {\n      children: [/*#__PURE__*/_jsxDEV(ChatRoomModal, {\n        visible: showModal,\n        createChatRoom: createChatRoom,\n        hideModal: () => {\n          setShowModal(false);\n        },\n        newChatUser: newChatUser,\n        setNewChatUser: setNewChatUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n        type: \"editable-card\",\n        onChange: onChange,\n        activeKey: activeKey,\n        onEdit: onEdit,\n        children: panes.map(pane => /*#__PURE__*/_jsxDEV(TabPane, {\n          tab: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Badge, {\n              count: pane.unseen,\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\" \", pane.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true),\n          closable: pane.closable,\n          children: /*#__PURE__*/_jsxDEV(ChatBox, {\n            pane: pane,\n            me: me,\n            chatBoxName: pane.key,\n            activeKey: activeKey,\n            boxKey: pane.key,\n            panes: panes,\n            setPanes: setPanes,\n            focused: focused\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, pane.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 22,\n        children: /*#__PURE__*/_jsxDEV(Input.Search, {\n          value: body,\n          onChange: e => setBody(e.target.value),\n          enterButton: \"Send\",\n          placeholder: \"Type a message here...\",\n          onFocus: onFocus,\n          onBlur: onBlur,\n          onSearch: msg => {\n            if (!msg) {\n              displayStatus({\n                type: 'error',\n                msg: 'Please enter a username and a message body.'\n              });\n              return;\n            }\n\n            sendMessage(msg);\n            setBody('');\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 2,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          danger: true,\n          onClick: clearMessages,\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ChatRoom, \"rwqZf9cBjrH2zIMw/NeLpi+hjZQ=\");\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["/Users/karnielaliao/Downloads/wp1101-main 3/hw9/frontend/src/Containers/ChatRoom.js"],"names":["Message","Title","Button","Input","Tabs","Row","Col","Badge","ChatRoomModal","ChatBox","useState","TabPane","ChatRoom","me","body","setBody","newChatUser","setNewChatUser","activeKey","setActiveKey","panes","setPanes","showModal","setShowModal","displayStatus","sendMessage","clearMessages","createChatRoom","focused","setFocused","onChange","onEdit","targetKey","action","add","remove","newActiveKey","lastIndex","forEach","pane","i","key","newPanes","filter","length","onFocus","onBlur","map","unseen","title","closable","e","target","value","msg","type"],"mappings":"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","sourcesContent":["import Message from './Message'\nimport Title from './Title'\nimport { Button, Input, Tabs, Row, Col, Badge } from 'antd'\nimport ChatRoomModal from './ChatRoomModal'\nimport ChatBox from './ChatBox'\nimport { useState } from 'react'\nconst { TabPane } = Tabs\n\n\nconst ChatRoom = ({me,\n  body, setBody, \n  newChatUser, setNewChatUser,\n  activeKey, setActiveKey,\n  panes, setPanes,\n  showModal, setShowModal,\n  displayStatus, sendMessage, clearMessages, createChatRoom}) => {\n  \n  const [focused, setFocused] = useState(false)\n\n  const onChange = activeKey => {\n    setActiveKey(activeKey)\n  };\n\n  const onEdit = (targetKey, action) => {\n    if(action === 'add'){\n      add()\n    }\n    else if(action === 'remove'){\n      remove(targetKey)\n    }\n  };\n\n  const add = () => {\n    setShowModal(true)\n  };\n  \n  const remove = targetKey => {\n    \n    let newActiveKey = activeKey;\n    let lastIndex;\n    panes.forEach((pane, i) => {\n      if (pane.key === targetKey) {\n        lastIndex = i - 1;\n      }\n    });\n    const newPanes = panes.filter(pane => pane.key !== targetKey);\n    if (newPanes.length && newActiveKey === targetKey) {\n      if (lastIndex >= 0) {\n        newActiveKey = newPanes[lastIndex].key;\n      } else {\n        newActiveKey = newPanes[0].key;\n      }\n    }\n    setPanes(newPanes)\n    setActiveKey(newActiveKey)\n  };\n\n  const onFocus = () => {\n    setFocused(true)\n  }\n\n  const onBlur = () => {\n    setFocused(false)\n  }\n  return (\n    <>\n      <Title>\n        <h1>{me}'s Chat</h1>\n      </Title>\n      <Message>\n        <ChatRoomModal visible={showModal}\n         createChatRoom={createChatRoom}\n         hideModal={() => {setShowModal(false)}}\n         newChatUser={newChatUser}\n         setNewChatUser={setNewChatUser} />\n        <Tabs\n          type=\"editable-card\"\n          onChange={onChange}\n          activeKey={activeKey}\n          onEdit={onEdit}\n        >\n        {panes.map(pane => (\n          \n          <TabPane \n            tab={\n              <>\n              <Badge count={pane.unseen} size=\"small\"></Badge>\n                <span> {pane.title}</span>\n                </>\n            } \n            key={pane.key} closable={pane.closable}>\n            {\n              \n              <ChatBox pane={pane} me={me} chatBoxName={pane.key} activeKey={activeKey} boxKey={pane.key} panes={panes} setPanes={setPanes} focused={focused} />\n              \n              }\n          </TabPane>\n          \n        ))}\n        </Tabs>\n      </Message>\n      <Row>\n        <Col span={22}>\n          <Input.Search\n            value={body}\n            onChange={(e) => setBody(e.target.value)}\n            enterButton=\"Send\"\n            placeholder=\"Type a message here...\"\n            onFocus={onFocus}\n            onBlur={onBlur}\n            onSearch={(msg) => {\n              if(!msg){\n                displayStatus({\n                  type: 'error',\n                  msg: 'Please enter a username and a message body.'\n                })\n                return\n              }\n              sendMessage(msg)\n              setBody('')\n            }}\n          ></Input.Search>\n        </Col>\n        <Col span={2}>\n          <Button type=\"primary\" danger onClick={clearMessages}>\n            Clear\n          </Button>\n        </Col>\n      </Row>\n    </>\n  )}\n\nexport default ChatRoom\n"]},"metadata":{},"sourceType":"module"}